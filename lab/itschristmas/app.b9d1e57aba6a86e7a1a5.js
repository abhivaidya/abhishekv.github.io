!function(l){function e(e){for(var t,n,i=e[0],a=e[1],r=e[2],o=0,s=[];o<i.length;o++)n=i[o],u[n]&&s.push(u[n][0]),u[n]=0;for(t in a)Object.prototype.hasOwnProperty.call(a,t)&&(l[t]=a[t]);for(h&&h(e);s.length;)s.shift()();return p.push.apply(p,r||[]),c()}function c(){for(var e,t=0;t<p.length;t++){for(var n=p[t],i=!0,a=1;a<n.length;a++){var r=n[a];0!==u[r]&&(i=!1)}i&&(p.splice(t--,1),e=o(o.s=n[0]))}return e}var n={},u={app:0},p=[];function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return l[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=l,o.c=n,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var t=window.webpackJsonp=window.webpackJsonp||[],i=t.push.bind(t);t.push=e,t=t.slice();for(var a=0;a<t.length;a++)e(t[a]);var h=i;p.push([1,"vendor"]),c()}([,function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),n(2),n(3);var a=i(n(4));window.addEventListener("DOMContentLoaded",function(){var e=new a.default("#renderCanvas");e.doRender();var t=new URL(window.location.href);e.from=t.searchParams.get("from").toUpperCase(),e.to=t.searchParams.get("to").toUpperCase()})},function(e,t,n){},,function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});var o=i(n(0));n(9);var s=n(10),a=function(){function e(e){this.alphabetModels={},this.from="",this.to="",this.santaAnimGroups={},this.keysDown={},this.walkSpeed=.2,this.turnSpeed=20,this.lastFrame=-1,document.onkeydown=this.handleKeyDown.bind(this),document.onkeyup=this.handleKeyUp.bind(this),o.Engine.ShadersRepository="src/shaders/",this._canvas=document.querySelector(e),this._engine=new o.Engine(this._canvas,!0,{},!0),this._scene=new o.Scene(this._engine),this._scene.fogMode=o.Scene.FOGMODE_EXP2,this._scene.fogDensity=.05,this._scene.fogColor=new o.Color3(.8,.83,.8),this._scene.collisionsEnabled=!0,this._scene.gravity=new o.Vector3(0,0,0),this.createBasicEnv()}return e.prototype.createBasicEnv=function(){var i=this,e=o.Mesh.CreateSphere("skyBox",10,2500,this._scene),t=new o.ShaderMaterial("gradient",this._scene,"gradient",{});t.setFloat("offset",0),t.setFloat("exponent",.6),t.setColor3("topColor",o.Color3.FromInts(0,119,255)),t.setColor3("bottomColor",o.Color3.FromInts(240,240,255)),t.backFaceCulling=!1,e.material=t;var n=new o.DirectionalLight("dir",new o.Vector3(1,-1,-2),this._scene);n.position=new o.Vector3(-300,300,600),n.intensity=.5,new o.HemisphericLight("light",new o.Vector3(0,1,0),this._scene).intensity=1,this._shadowGenerator=new o.ShadowGenerator(2048,n),this._camera=new o.ArcRotateCamera("arcam",0,Math.PI/2,5,new o.Vector3(0,1,0),this._scene),this._camera.upperBetaLimit=Math.PI/2,this._camera.lowerRadiusLimit=5,this._camera.upperRadiusLimit=30,s.arcRotateCameraFixer(this._camera),this._camera.attachControl(this._canvas,!1),this._assetsManager=new o.AssetsManager(this._scene),this._assetsManager.addTextureTask("snowflake","assets/textures/snowflake.png"),this._assetsManager.addMeshTask("environment","","assets/3d/christmas.glb",""),this._assetsManager.addMeshTask("alphabets","","assets/3d/alphabets.glb",""),this._assetsManager.addMeshTask("santa","","assets/3d/santa_with_anims_textures.glb",""),this._engine.loadingUIText="Loading...",this._assetsManager.onProgressObservable.add(function(e){var t=e.remainingCount,n=e.totalCount;i._engine.loadingUIText="We are loading the scene. "+t+" out of "+n+" items still need to be loaded."}),this._assetsManager.onTaskSuccessObservable.add(function(e){if("environment"==e.name&&e.loadedMeshes.forEach(function(e){i._shadowGenerator.getShadowMap().renderList.push(e),e.receiveShadows=!0,"Collider"==e.name&&(e.checkCollisions=!0)}),"snowflake"==e.name&&i.generateSnowParticles(e.texture),"alphabets"==e.name&&(e.loadedMeshes.forEach(function(e){(i.alphabetModels[e.name]=e).setEnabled(!1)}),i.generateFromTo()),"santa"==e.name){i.santa=new o.Mesh("santa",i._scene);var t=e.loadedSkeletons[0];t&&(t.animationPropertiesOverride=new o.AnimationPropertiesOverride,t.animationPropertiesOverride.enableBlending=!0,t.animationPropertiesOverride.blendingSpeed=.05,t.animationPropertiesOverride.loopMode=1),t.getScene().animationGroups.forEach(function(e){i.santaAnimGroups[e.name]=e}),e.loadedMeshes.forEach(function(e){i.santa.addChild(e)}),i.santa.scaling=new o.Vector3(.075,.075,.075),i.santaCollider=o.Mesh.CreateBox("collider",.5,i._scene),i.santaCollider.position=new o.Vector3(0,.25,0),i.santaCollider.scaling=new o.Vector3(.5,1,.5),i.santaCollider.visibility=0,i.santa.addChild(i.santaCollider),i._shadowGenerator.getShadowMap().renderList.push(i.santa)}});var a=new o.StandardMaterial("matBB",this._scene);a.emissiveColor=new o.Color3(1,1,1),a.wireframe=!0,this.planOBB=o.Mesh.CreateBox("OBB",1,this._scene),this.planOBB.scaling=new o.Vector3(1,1,.05),this.planOBB.material=a,this.planOBB.position=new o.Vector3(2,0,0),this._assetsManager.load();var r=o.Mesh.CreateGround("ground",200,200,1,this._scene);r.material=new o.StandardMaterial("ground",this._scene),r.material.diffuseColor=o.Color3.FromInts(193,181,151),r.material.specularColor=o.Color3.Black(),r.receiveShadows=!0},e.prototype.generateSnowParticles=function(e){var t=new o.ParticleSystem("particles",2e4,this._scene);t.particleTexture=e,t.emitter=new o.Vector3(0,1,0),t.minEmitBox=new o.Vector3(-10,10,-10),t.maxEmitBox=new o.Vector3(15,0,10),t.color1=new o.Color4(1,1,1,1),t.color2=new o.Color4(1,1,1,1),t.colorDead=new o.Color4(1,1,1,.5),t.minSize=.1,t.maxSize=.2,t.minLifeTime=.3,t.maxLifeTime=1.5,t.emitRate=1500,t.blendMode=o.ParticleSystem.BLENDMODE_STANDARD,t.gravity=new o.Vector3(0,-9.81,0),t.direction1=new o.Vector3(-7,-8,3),t.direction2=new o.Vector3(7,-8,-3),t.minAngularSpeed=0,t.maxAngularSpeed=Math.PI,t.minEmitPower=1,t.maxEmitPower=3,t.updateSpeed=5e-4,t.start()},e.prototype.doRender=function(){var a=this;this._engine.runRenderLoop(function(){a._scene.render();var e=(new Date).getTime();-1==a.lastFrame&&(a.lastFrame=e);var t=(e-a.lastFrame)/1e3;a.lastFrame=e;var n=0,i=0;a.keysDown[65]?n-=t*a.turnSpeed:a.keysDown[68]&&(n+=t*a.turnSpeed),a.keysDown[87]?i=a.walkSpeed:a.keysDown[83]&&(i=-a.walkSpeed),a.santa&&(a.santaCollider.intersectsMesh(a.planOBB,!1)&&(i=-.1),a.santa.translate(o.Axis.Z,i,o.Space.LOCAL),a.santa.rotate(o.Axis.Y,n/10,o.Space.WORLD))}),window.addEventListener("resize",function(){a._engine.resize()})},e.prototype.generateFromTo=function(){var e="",t=new o.AbstractMesh("fromMesh",this._scene);t.rotation.y=Math.PI/1.33,t.position=new o.Vector3(0,.25,1),null!=this.from&&(e=this.from),null!=this.to&&this.to;for(var n=this._shadowGenerator.getShadowMap(),i=0;i<e.length;i++){var a=this.alphabetModels[e[i]].clone(e[i],t,!0);a&&(a.position.x=.25*i,a.rotation.x=Math.PI/2,n.renderList.push(a),a.material.emissiveColor=o.Color3.Random())}t.position.x=e.length/2*.25},e.prototype.getMeshWidth=function(e){var t=e.getBoundingInfo().boundingBox.vectorsWorld;return Number(t[1].x-t[0].x)},e.prototype.handleKeyDown=function(e){this.keysDown[e.keyCode]=!0,(this.keysDown[87]||this.keysDown[83])&&(this.santaAnimGroups["Happy Walk"].isPlaying||(this.santaAnimGroups.Happy.stop(),this.santaAnimGroups["Happy Walk"].play(!0)))},e.prototype.handleKeyUp=function(e){this.keysDown[e.keyCode]=!1,this.keysDown[87]||this.keysDown[83]||this.santaAnimGroups.Happy.isPlaying||(this.santaAnimGroups["Happy Walk"].stop(),this.santaAnimGroups.Happy.play(!0))},e.prototype.degToRad=function(e){return e*Math.PI/180},e}();t.default=a},,,,,,function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var a,r=arguments.length,o=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;0<=s;s--)(a=e[s])&&(o=(r<3?a(o):3<r?a(t,n,o):a(t,n))||o);return 3<r&&o&&Object.defineProperty(t,n,o),o},a=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var E=n(0),o={};function r(a,r){return function(e,t){var n,i=(n=e.getClassName(),o[n]||(o[n]={}),o[n]);i[t]||(i[t]={type:a,sourceName:r})}}function s(e){return r(0,e)}var l=function(){function e(){this.buttons=[0,1,2],this.angularSensibilityX=1e3,this.angularSensibilityY=1e3,this.pinchPrecision=12,this.pinchDeltaPercentage=0,this.panningSensibility=1e3,this.multiTouchPanning=!0,this.multiTouchPanAndZoom=!0,this.pinchInwards=!0,this._isPanClick=!1}return e.prototype.attachControl=function(g,v){var _,P=this,w=this.camera.getEngine(),b=null,M=null,S=0,O=0,x=0,C={x:0,y:0,isPaning:!1,isPinching:!1};this._pointerInput=function(e,t){var n=e.event,i="touch"===e.event.pointerType;if(void 0!==n.pointerId&&!w.isInVRExclusivePointerMode&&(e.type===E.PointerEventTypes.POINTERMOVE||-1!==P.buttons.indexOf(n.button))){var a=n.srcElement||n.target;if(e.type===E.PointerEventTypes.POINTERDOWN&&a){try{a.setPointerCapture(n.pointerId)}catch(e){}P._isPanClick=n.button===P.camera._panningMouseButton,_={x:n.clientX,y:n.clientY,pointerId:n.pointerId,type:n.pointerType},null===b?b=_:null===M&&(M=_),v||(n.preventDefault(),g.focus())}else if(e.type===E.PointerEventTypes.POINTERDOUBLETAP)P.camera.useInputToRestoreState&&P.camera.restoreState();else if(e.type===E.PointerEventTypes.POINTERUP&&a){try{a.releasePointerCapture(n.pointerId)}catch(e){}_=null,S=0,C.isPaning=!1,C.isPinching=!1,O=x=0,i||(M=null),w._badOS?b=M=null:M&&b&&b.pointerId==n.pointerId?(b=M,M=null,_={x:b.x,y:b.y,pointerId:b.pointerId,type:n.pointerType}):b&&M&&M.pointerId==n.pointerId?(M=null,_={x:b.x,y:b.y,pointerId:b.pointerId,type:n.pointerType}):b=M=null,v||n.preventDefault()}else if(e.type===E.PointerEventTypes.POINTERMOVE)if(v||n.preventDefault(),b&&null===M&&_){if(0!==P.panningSensibility&&(n.ctrlKey&&P.camera._useCtrlForPanning||P._isPanClick))P.camera.inertialPanningX+=-(n.clientX-_.x)/P.panningSensibility,P.camera.inertialPanningY+=(n.clientY-_.y)/P.panningSensibility;else{var r=n.clientX-_.x,o=n.clientY-_.y;P.camera.inertialAlphaOffset-=r/P.angularSensibilityX,P.camera.inertialBetaOffset-=o/P.angularSensibilityY}_.x=n.clientX,_.y=n.clientY}else if(b&&M){var s=b.pointerId===n.pointerId?b:M;s.x=n.clientX,s.y=n.clientY;var l=P.pinchInwards?1:-1,c=b.x-M.x,u=b.y-M.y,p=c*c+u*u,h=Math.sqrt(p);if(0===S)return O=h,S=p,C.x=(b.x+M.x)/2,void(C.y=(b.y+M.y)/2);if(P.multiTouchPanAndZoom){if(P.pinchDeltaPercentage?P.camera.inertialRadiusOffset+=.001*(p-S)*P.camera.radius*P.pinchDeltaPercentage:P.camera.inertialRadiusOffset+=(p-S)/(P.pinchPrecision*((P.angularSensibilityX+P.angularSensibilityY)/2)*l),0!==P.panningSensibility){var d=(b.x+M.x)/2,m=(b.y+M.y)/2,f=d-C.x,y=m-C.y;C.x=d,C.y=m,P.camera.inertialPanningX+=-f/P.panningSensibility,P.camera.inertialPanningY+=y/P.panningSensibility}}else{if(x++,C.isPinching||x<20&&Math.abs(h-O)>P.camera.pinchToPanMaxDistance)P.pinchDeltaPercentage?P.camera.inertialRadiusOffset+=.001*(p-S)*P.camera.radius*P.pinchDeltaPercentage:P.camera.inertialRadiusOffset+=(p-S)/(P.pinchPrecision*((P.angularSensibilityX+P.angularSensibilityY)/2)*l),C.isPaning=!1,C.isPinching=!0;else if(_&&_.pointerId===s.pointerId&&0!==P.panningSensibility&&P.multiTouchPanning){if(!C.isPaning)return C.isPaning=!0,C.isPinching=!1,C.x=s.x,void(C.y=s.y);P.camera.inertialPanningX+=-(s.x-C.x)/P.panningSensibility,P.camera.inertialPanningY+=(s.y-C.y)/P.panningSensibility}_&&_.pointerId===n.pointerId&&(C.x=s.x,C.y=s.y)}S=p}}},this._observer=this.camera.getScene().onPointerObservable.add(this._pointerInput,E.PointerEventTypes.POINTERDOWN|E.PointerEventTypes.POINTERUP|E.PointerEventTypes.POINTERMOVE|E.PointerEventTypes.POINTERDOUBLETAP),this._onContextMenu=function(e){e.preventDefault()},this.camera._useCtrlForPanning||g.addEventListener("contextmenu",this._onContextMenu,!1),this._onLostFocus=function(){b=M=null,S=0,C.isPaning=!1,C.isPinching=!1,_=null,O=x=0},this._onMouseMove=function(e){if(w.isPointerLock){var t=e.movementX||e.mozMovementX||e.webkitMovementX||e.msMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||e.msMovementY||0;P.camera.inertialAlphaOffset-=t/P.angularSensibilityX,P.camera.inertialBetaOffset-=n/P.angularSensibilityY,v||e.preventDefault()}},this._onGestureStart=function(e){void 0!==window.MSGesture&&(P._MSGestureHandler||(P._MSGestureHandler=new MSGesture,P._MSGestureHandler.target=g),P._MSGestureHandler.addPointer(e.pointerId))},this._onGesture=function(e){P.camera.radius*=e.scale,e.preventDefault&&(v||(e.stopPropagation(),e.preventDefault()))},g.addEventListener("mousemove",this._onMouseMove,!1),g.addEventListener("MSPointerDown",this._onGestureStart,!1),g.addEventListener("MSGestureChange",this._onGesture,!1),E.Tools.RegisterTopRootEvents([{name:"blur",handler:this._onLostFocus}])},e.prototype.detachControl=function(e){this._onLostFocus&&E.Tools.UnregisterTopRootEvents([{name:"blur",handler:this._onLostFocus}]),e&&this._observer&&(this.camera.getScene().onPointerObservable.remove(this._observer),this._observer=null,this._onContextMenu&&e.removeEventListener("contextmenu",this._onContextMenu),this._onMouseMove&&e.removeEventListener("mousemove",this._onMouseMove),this._onGestureStart&&e.removeEventListener("MSPointerDown",this._onGestureStart),this._onGesture&&e.removeEventListener("MSGestureChange",this._onGesture),this._isPanClick=!1,this.pinchInwards=!0,this._onMouseMove=null,this._onGestureStart=null,this._onGesture=null,this._MSGestureHandler=null,this._onLostFocus=null,this._onContextMenu=null)},e.prototype.getClassName=function(){return"ArcRotateCameraPointersInput"},e.prototype.getSimpleName=function(){return"pointers"},i([s(),a("design:type",Object)],e.prototype,"buttons",void 0),i([s(),a("design:type",Object)],e.prototype,"angularSensibilityX",void 0),i([s(),a("design:type",Object)],e.prototype,"angularSensibilityY",void 0),i([s(),a("design:type",Object)],e.prototype,"pinchPrecision",void 0),i([s(),a("design:type",Object)],e.prototype,"pinchDeltaPercentage",void 0),i([s(),a("design:type",Number)],e.prototype,"panningSensibility",void 0),i([s(),a("design:type",Boolean)],e.prototype,"multiTouchPanning",void 0),i([s(),a("design:type",Boolean)],e.prototype,"multiTouchPanAndZoom",void 0),e}();t.arcRotateCameraFixer=function(e){e.inputs.removeByType("ArcRotateCameraPointersInput"),e.inputs.add(new l)}}]);